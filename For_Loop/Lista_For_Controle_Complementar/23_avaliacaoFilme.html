<script>
  //PROBLEMA
  /*
    Desenvolva um programa que pergunte ao espectador a sua idade e a sua avaliação sobre o filme, sendo que deverá informar R para REGULAR e B para BOM.
    Apresente os seguintes dados:
    - A média de idade das pessoas que responderam que o filme era REGULAR
    - A média de idade das pessoas que responderam que o filme era BOM
    - A média de idade de todas as pessoas que assistiram ao filme
    - O percentual de pessoas que classificou o filme como REGULAR
    - O percentual de pessoas que classificou o filme como BOM
    */

  let filmes = ["A Cabana", "Projeto X", "Up: Altas Aventuras"];

  let sorteiaFilme = filmes[Math.floor(Math.random() * filmes.length)];

  let assitiuFilme;

  let avaliacaoFilme;

  let assistiramFilme = 0;
  let notaRegular = 0;
  let notaBoa = 0;
  let idades = [];
  let idade;
  let somaIdadeFilme = 0;
  let somaIdadeFilmeR = 0;
  let somaIdadeFilmeB = 0;

  /* 
  Para fazer em um futuro próximo
  let pessoas = [
    {
      idade: 18,
      assitiuFilme: true,
      avaliacaoFilme: "R",
    },
  ] */

  for (let i = 1; i <= 10; i++) {
    assitiuFilme = prompt(`Você assistiu o filme ${sorteiaFilme}?`)
      .toUpperCase()
      .trim();

    while (
      assistiramFilme != "S" &&
      assistiramFilme != "SIM" &&
      assistiramFilme != "N" &&
      assistiramFilme != "NÃO" &&  // arrumar aqui...
      assistiramFilme != "NAO"
    ) {
      assitiuFilme = prompt(
        `Você assistiu o filme ${sorteiaFilme}? (S)im ou (N)ao`
      )
        .toUpperCase()
        .trim();
    }

    idade = Number(prompt(`Informe sua idade.`));

    while (isNaN(idade) || idade < 0 || idade > 120) {
      idade = Number(prompt(`Informe sua idade. (Valor Válido)`));
    }

    if (assitiuFilme == "S" || assitiuFilme == "SIM") {
      somaIdadeFilme += idade;
      assistiramFilme++;
      avaliacaoFilme = prompt(
        `Como você classifica o filme ${sorteiaFilme}? (R)egular (B)om`
      );
      while (avaliacaoFilme != "R" && avaliacaoFilme != "B") {
        avaliacaoFilme = prompt(
          `Como você classifica o filme ${sorteiaFilme}? (R)egular (B)om`
        );
      }
      if (avaliacaoFilme == "R") {
        notaRegular++;
        somaIdadeFilmeR += idade;
      } else {
        notaBoa++;
        somaIdadeFilmeB += idade;
      }
    }
  }

  let mediaIdadeFilmeR = somaIdadeFilmeR / assistiramFilme;
  let mediaIdadeFilmeB = somaIdadeFilmeB / assistiramFilme;
  let mediaIdadeFilme = mediaIdadeFilme / assistiramFilme;
  let porcentagemFilmeR = ((notaRegular * 100) / assistiramFilme).toFixed(2);
  let porcentagemFilmeB = ((notaBoa * 100) / assistiramFilme).toFixed(2);

  document.write(
    `A média de idade das pessoas que responderam que o filme era REGULAR é: ${mediaIdadeFilmeR} anos. <br>`
  );

  document.write(
    `A média de idade das pessoas que responderam que o filme era BOM é: ${mediaIdadeFilmeB} anos. <br>`
  );

  document.write(
    `A média de idade de todas as pessoas que assistiram ao filme é: ${mediaIdadeFilme} anos. <br>`
  );

  document.write(
    `O percentual de pessoas que classificou o filme como REGULAR é: ${porcentagemFilmeR}%`
  );
  document.write(
    `O percentual de pessoas que classificou o filme como REGULAR é: ${porcentagemFilmeB}%`
  );
</script>
